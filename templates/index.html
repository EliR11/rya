{% extends "base.html" %}

{% block content %}

<div class="w3-container w3-center w3-padding-32" style="background-color: #f2f2f2; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.2);">
    <h2>Lista de Personas</h2>

    <!-- Formulario de Búsqueda -->
    <form method="GET" action="{{ url_for('search') }}" class="w3-margin-bottom">
        <input type="text" name="cedula" placeholder="Buscar por Cédula" required class="w3-input w3-border w3-round" style="width: 300px; display: inline-block;">
        <button type="submit" class="w3-button w3-blue">Buscar</button>
    </form>

    <a href="{{ url_for('estadisticas') }}" class="w3-button w3-purple w3-margin-bottom">Ver Estadísticas</a>
    <a href="{{ url_for('create') }}" class="w3-button w3-green w3-margin-bottom">Agregar Nueva Persona</a>

    <div style="overflow-x: auto; margin: auto; width: 100%;">
        <table class="w3-table w3-bordered w3-striped w3-hoverable" style="border-radius: 8px; overflow: hidden;">
            <thead>
                <tr class="w3-light-grey">
                    <th>nombres</th>
                    <th>apellidos</th>
                    <th>nro acreditación</th>
                    <th>nacionalidad</th>
                    <th>cedula</th>
                    <th>copia ci act</th>
                    <th>csm</th>
                    <th>vencimiento csm</th>
                    <th>credencial</th>
                    <th>constancia de trabajo</th>
                    <th>currículo</th>
                    <th>teléfono</th>
                    <th>año acreditación</th>
                    <th>nro gaceta</th>
                    <th>nro decisión</th>
                    <th>activo en defensoria</th>
                    <th>dirección defensoria</th>
                    <th>inactivo</th>
                    <th>motivo</th>
                    <th>trabaja actualmente</th>
                    <th>lugar de trabajo</th>
                    <th>1era fecha renovación</th>
                    <th>nro gaceta2</th>
                    <th>nro decisión3</th>
                    <th>2da fecha renovación</th>
                    <th>nro gaceta4</th>
                    <th>nro decisión5</th>
                    <th>3ra fecha renovación</th>
                    <th>nro gaceta6</th>
                    <th>nro decisión7</th>
                    <th>4ta fecha renovación</th>
                    <th>nro gaceta8</th>
                    <th>nro decisión9</th>
                </tr>
            </thead>
            <tbody>
                {% for persona in personas %}
                <tr>
                    <td>{{ persona.nombres }}</td>
                    <td>{{ persona.apellidos }}</td>
                    <td>{{ persona.nro_acreditacion }}</td>
                    <td>{{ persona.nacionalidad }}</td>
                    <td>{{ persona.cedula }}</td>
                    <td>{{ persona.copia_ci_act }}</td>
                    <td>{{ persona.csm }}</td>
                    <td>{{ persona.vencimiento_csm }}</td>
                    <td>{{ persona.credencial }}</td>
                    <td>{{ persona.constancia_trabajo }}</td>
                    <td>{{ persona.curriculo }}</td>
                    <td>{{ persona.telefono }}</td>
                    <td>{{ persona.año_acreditacion }}</td>
                    <td>{{ persona.nro_gaceta }}</td>
                    <td>{{ persona.nro_decision }}</td>
                    <td>{{ persona.activo_defensoria }}</td>
                    <td>{{ persona.direccion_defensoria }}</td>
                    <td>{{ persona.inactivo }}</td>
                    <td>{{ persona.motivo }}</td>
                    <td>{{ persona.trabaja_actualmente }}</td>
                    <td>{{ persona.lugar_trabajo }}</td>
                    <td>{{ persona.fecha_renovacion1 }}</td>
                    <td>{{ persona.nro_gaceta2 }}</td>
                    <td>{{ persona.nro_decision3 }}</td>
                    <td>{{ persona.fecha_renovacion2 }}</td>
                    <td>{{ persona.nro_gaceta4 }}</td>
                    <td>{{ persona.nro_decision5 }}</td>
                    <td>{{ persona.fecha_renovacion3 }}</td>
                    <td>{{ persona.nro_gaceta6 }}</td>
                    <td>{{ persona.nro_decision7 }}</td>
                    <td>{{ persona.fecha_renovacion4 }}</td>
                    <td>{{ persona.nro_gaceta8 }}</td>
                    <td>{{ persona.nro_decision9 }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>

    {% if not personas %}
        <p>No hay registros disponibles.</p>
    {% endif %}
</div>
{% endblock %}
